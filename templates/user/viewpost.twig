{% extends "layout.twig" %}

{% block meta %}

<meta name="description" content="{{ currentpost.shortDescription }}" />
<meta name="content_origin" content="{{ currentpost.createdOn.format(" Y-m-d")}}" />

{% endblock %}

{% block header %}
{% include "user/navbar.twig" %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-3 col-4">
            {% include "user/searchpostsidepanel.twig" %}
        </div>
        <div class="col-lg-9 col-8">
            <div class="container-fluid">
                <!-- 
                actions buttons for current post.
                show this if user is viewing own post
                -->
                {% if me == currentpost.creator %}
                <div class="container-fluid d-flex justify-content-end mb-3">
                    <a href="/post/edit/{{currentpost.postId}}" class="btn btn-primary me-2">
                        <i class="fa fa-pencil"></i>
                        Edit
                    </a>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deletePostConfirm">
                        <i class="fa fa-trash"></i>
                        Delete
                    </button>
                </div>
                {% endif %}

                <!-- show content -->
                {% include "user/postcontent.twig" %}
            </div>
        </div>
    </div>
</div>

<!-- START: confirmation modal before delete all posts -->
<div class="modal fade" id="deletePostConfirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="deletePostConfirmTitle" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="deletePostConfirmTitle">Confirm Delete Post</h5>
            </div>
            <div class="modal-body">
                You are about to delete your post <strong>{{currentpost.title}}</strong>. Once deleted you cann't
                restore your post later any way. Confirm to proceed
                or cancel.
            </div>
            <div class="modal-footer">
                <a href="/post/delete/{{currentpost.postId}}" class="btn"
                    >Confirm</a>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<!-- END: confirmation modal before delete all posts -->

{% endblock %}